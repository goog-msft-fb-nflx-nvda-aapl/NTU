"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9561],{29561:function(e,t,n){n.d(t,{default:function(){return z}});var r=n(57437),o=n(2265),s=n(97271),l=n(18087),a=n(64042),i=n(66334),c=n(51432),u=n(71995),d=n(91863),p=n(71145),m=n(89896),h=n(27316),g=n(37040),f=n(24134),x=n(17042),v=n(62626),A=n(92670),b=n(67332),y=n(41017),w=n(16349);let j=[{label:"collection",href:A.h.collection,icon:(0,r.jsx)(a.Z,{size:16})},{label:"priority-table",href:"/".concat(y.G7.Priority,"/").concat(y.bW.Table),icon:(0,r.jsx)(i.Z,{size:16})},{label:"priority-list",href:"/".concat(y.G7.Priority,"/").concat(y.bW.List),icon:(0,r.jsx)(c.Z,{size:16})},{label:"result-list",href:"/".concat(y.G7.Result),icon:(0,r.jsx)(u.Z,{size:16})},{label:"bachelor-course",href:A.h.bachelorCourse,icon:(0,r.jsx)(d.Z,{size:16})}];function z(){var e,t,n,s,a;let{data:i,isLoading:c}=(0,x.a)(),[u,d]=(0,o.useState)(null),m=(0,l.useTranslations)("header.login-button");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.rU,{href:i?"":A.h.login,title:null!==(n=null==i?void 0:i.name)&&void 0!==n?n:m("login-long"),onClick:function(e){i&&(e.preventDefault(),d(e.currentTarget))},prefetch:!1,tabIndex:0,className:(0,w.cn)("-mx-2 flex size-10 items-center justify-center rounded-full transition-colors hover:bg-neutral-200 md:-mx-1",!i&&"-mx-4 size-auto p-4 text-black/70 md:-mx-2 md:px-2 md:text-sm md:font-medium md:hover:bg-transparent md:hover:text-black",c&&"pointer-events-none text-black/30",!!u&&"bg-neutral-300 hover:bg-neutral-300"),children:i?(0,r.jsx)("div",{className:"flex size-8 items-center justify-center rounded-full font-medium text-white",style:{backgroundColor:"hsl(".concat(null!==(s=null===(e=i.name)||void 0===e?void 0:e.split("").reduce((e,t)=>e+t.charCodeAt(0),0))&&void 0!==s?s:0," 50% 45% / 1)")},children:null!==(a=null===(t=i.name)||void 0===t?void 0:t[0])&&void 0!==a?a:""}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"hidden md:flex",children:m("login-long")}),(0,r.jsx)(p.Z,{size:18,className:"md:hidden"})]})}),(0,r.jsx)(h.Z,{disablePortal:!0,sx:{zIndex:10},open:!!u,anchorEl:u,transition:!0,modifiers:[{name:"offset",options:{offset:[0,4]}}],children:e=>{let{TransitionProps:t}=e;return(0,r.jsx)(g.Z,{...t,timeout:150,style:{transformOrigin:"center top"},children:(0,r.jsx)("div",{children:(0,r.jsx)(f.d,{onClickAway:()=>d(null),children:(0,r.jsx)("div",{onClick:()=>d(null),children:(0,r.jsx)(k,{})})})})})}})]})}function k(){var e,t,n;let[,,o]=(0,s.Z)("auth"),{data:a}=(0,x.a)(),i=(0,l.useTranslations)("header.login-button");return(0,r.jsxs)("div",{className:"mx-2 flex w-60 max-w-full flex-col overflow-hidden rounded-2xl border bg-white p-2 shadow-md",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1 py-3",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("p",{className:"text-center text-xl",children:null==a?void 0:a.name}),(0,r.jsxs)("p",{className:"text-center text-xs text-neutral-500",children:[null==a?void 0:a.sequence," \xb7"," ",null!==(n=null==a?void 0:null===(e=a.department)||void 0===e?void 0:e.shortName)&&void 0!==n?n:null==a?void 0:null===(t=a.department)||void 0===t?void 0:t.name]})]}),(0,r.jsx)("hr",{className:"my-2"}),j.map((e,t)=>{let{label:n,href:o,icon:s}=e;return(0,r.jsxs)(v.rU,{href:o,className:"flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors hover:bg-black/5",children:[s,(0,r.jsx)("span",{children:i(n)})]},t)}),(0,r.jsx)("hr",{className:"my-2"}),(0,r.jsxs)("a",{href:A.h.logout,className:"flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors hover:bg-error-main/10 hover:text-error-main",children:[(0,r.jsx)(m.Z,{size:16}),(0,r.jsx)("span",{children:i("logout")})]}),"prod"!==b.X.PROD&&(0,r.jsx)("button",{onClick:()=>o(),className:"flex items-center gap-3 rounded-lg px-3 py-1 text-xs font-medium transition-colors hover:bg-error-main/10 hover:text-error-main",children:(0,r.jsx)("span",{children:"模擬 token 過期 (dev only)"})})]})}},17042:function(e,t,n){n.d(t,{a:function(){return m}});var r,o,s=n(97271),l=n(18087),a=n(16463),i=n(27776),c=n(51864),u=n(57890),d=n(50591),p=n(31863);(r=o||(o={})).Student="Student",r.Staff="Staff",r.Admin="Admin";let m=()=>{let e=(0,a.useParams)(),[t]=(0,s.Z)("auth"),n=(0,l.useTranslations)("hooks"),r=(0,p.i)(e.locale);return(0,c.a)({queryKey:u.a.user(r),queryFn:async()=>{if(!t)return null;let e=await d.Z.get("/v1/users/current",{params:{lang:r}});return 200===e.status&&i.A.success("Student"===e.data.userType?n("welcome-back-student",{name:e.data.name}):n("welcome-back",{name:e.data.name})),e.data},staleTime:36e5,retry:!1})}},62626:function(e,t,n){n.d(t,{go:function(){return o},jD:function(){return u},rU:function(){return i},tv:function(){return d}});var r,o,s=n(5758),l=n(63019);(r=o||(o={})).en="en",r.zhTW="zh-TW";let a=(0,l.R)({locales:["en","zh-TW"],defaultLocale:"zh-TW",localePrefix:"as-needed"}),{Link:i,redirect:c,usePathname:u,useRouter:d}=(0,s.iV)(a)},92670:function(e,t,n){n.d(t,{h:function(){return o}});var r=n(19725);let o={home:"/",login:"/login",logout:"/logout",news:e=>["/news",e].filter(Boolean).join("/"),help:"/help",collection:"/collection",search:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Sc.quick;return"/search/".concat(e)},course:(e,t)=>"/courses/".concat(e,"/").concat(t),schedule:function(){let{link:e,phase:t,view:n,field:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return["/schedule",null!=e?e:t,null!=n?n:r&&"priority",r].filter(Boolean).join("/")},devLoginUrl:"".concat("https://course.ntu.edu.tw/api","/v1/auth/dev/login"),prodLoginUrl:"".concat("https://course.ntu.edu.tw/api","/v1/auth/sso/login"),devLogoutUrl:"".concat("https://course.ntu.edu.tw/api","/v1/auth/dev/logout"),prodLogoutUrl:"".concat("https://course.ntu.edu.tw/api","/v1/auth/sso/logout"),ntuHomePage:"https://www.ntu.edu.tw/",ntuAcaHomePage:"https://www.aca.ntu.edu.tw/",bachelorCourse:"https://reg.aca.ntu.edu.tw/GradeCheck/StudentGCForm",googleMap:e=>"https://www.google.com/maps/search/?api=1&query=".concat(e),specialHref:e=>"https://specom.aca.ntu.edu.tw/Domain/program?program=".concat(e),deptInstructPdf:e=>"https://nol.ntu.edu.tw/nol/note/113-1/".concat(e,".pdf"),practiceGroup:"https://nol.ntu.edu.tw/nol/coursesearch/print_cougrp.php",taicaHref:"https://www.aca.ntu.edu.tw/w/aca/CDService_24082913533894186"}},57890:function(e,t,n){n.d(t,{a:function(){return r}});let r={progress:["progress"],filters:e=>[e,"filters"],enrollStatus:e=>["enroll-status",e],newsPage:e=>["news",e],search:(e,t,n)=>[e,"search",t,n],user:e=>["user",e].filter(Boolean),collections:e=>[...r.user(e),"collection"],collectionIds:e=>[...r.collections(e),"id-only"],preselects:e=>[...r.user(e),"preselect"],preselectIds:e=>[...r.preselects(e),"id-only"],results:(e,t)=>[...r.user(e),t,"result"]}},67332:function(e,t,n){var r,o;n.d(t,{X:function(){return r}}),(o=r||(r={})).LOCAL="local",o.DEV="dev",o.PROD="prod"},19725:function(e,t,n){var r,o,s,l,a,i,c,u,d,p,m,h;n.d(t,{NJ:function(){return v},Pp:function(){return g},SQ:function(){return x},Sc:function(){return r},bB:function(){return i},hd:function(){return f},uu:function(){return o},vZ:function(){return s},xz:function(){return a},yy:function(){return l}}),(c=r||(r={})).quick="quick",c.dept="dept",c.general="general",c.common="common",c.pearmy="pearmy",c.program="program",c.expertise="expertise",c.interschool="interschool",c.grouping="course-groups",c.english="english",(u=o||(o={})).keyword="k",u.semester="s",u.isFullYear="fy",u.time="t",u.timeStrictMatch="tsm",u.enrollMethods="em",u.otherLimits="ol",u.excludedKeywords="ek",u.isPrecise="ip",u.department="d",u.suggestedGrade="sg",u.isCompulsory="ic",u.generalCourseTypes="gct",u.commonCourseTypes="cct",u.peArmyCourseTypes="pact",u.courseProviders="cp",u.groupingCourseTypes="gpct",(d=s||(s={})).A1="A1",d.A2="A2",d.A3="A3",d.A4="A4",d.A5="A5",d.A6="A6",d.A7="A7",d.A8="A8",d.BasicAbility="B",d.Freshman="E";let g={A1:"A1",A2:"A2",A3:"A3",A4:"A4",A5:"A5",A6:"A6",A7:"A7",A8:"A8",B:"BasicAbility",E:"Freshman"};(p=l||(l={})).chinese="1",p.english="2",p.foreignLanguage="3",p.canBeForeignLanguage="4",p.commonSelective="5";let f={1:"chinese",2:"english",3:"foreignLanguage",4:"canBeForeignLanguage",5:"commonSelective"};(m=a||(a={})).health="1",m.specialSport="2",m.electivePE="3",m.schoolTeamPE="4",m.army="5";let x={1:"health",2:"specialSport",3:"electivePE",4:"schoolTeamPE",5:"army"};(h=i||(i={})).NTNU="ntnu",h.NTUST="ntust";let v={ntnu:"NTNU",ntust:"NTUST"}},41017:function(e,t,n){n.d(t,{G7:function(){return i},_n:function(){return g},bW:function(){return c},g8:function(){return m},nz:function(){return a},qb:function(){return u}});var r,o,s,l,a,i,c,u,d=n(59772);(r=a||(a={})).PreReg1="prereg1",r.PreReg2="prereg2",r.AddDrop1="adddrop1",r.AddDrop2="adddrop2",r.AddDrop3="adddrop3",r.AddDrop4="adddrop4",r.AddDrop5="adddrop5",r.AddDrop6="adddrop6",r.Final="final";let p={...a},m=Object.fromEntries(Object.entries(a).map(e=>{let[t,n]=e;return[n,t]}));(o=i||(i={})).Priority="priority",o.Result="result",(s=c||(c={})).List="list",s.Table="table",(l=u||(u={})).Preselecting="Preselecting",l.Started="Started",l.Waiting="Waiting",l.Ended="Ended";let h=d.z.object({canAddCourse:d.z.boolean(),endAt:d.z.string(),link:d.z.string(),phase:d.z.enum(Object.keys(a)),status:d.z.nativeEnum(u),startAt:d.z.string()}),g=d.z.object({progress:h.nullable(),progresses:h.array(),semester:d.z.string(),semesterList:d.z.string().array()}).transform(e=>{var t;return{progress:e.progress,progresses:e.progresses,semester:e.semester,semesterList:e.semesterList.sort((e,t)=>e.localeCompare(t,void 0,{numeric:!0})).reverse().map(e=>({semester:e,year:parseInt(e.split("-")[0]),term:parseInt(e.split("-")[1])})),current:(null===(t=e.progress)||void 0===t?void 0:t.phase)?p[e.progress.phase]:null}})},50591:function(e,t,n){var r,o=n(38472);let s=null!==(r=globalThis.axiosInstance)&&void 0!==r?r:o.default.create({baseURL:"https://course.ntu.edu.tw/api"});s.interceptors.request.use(e=>{let t=document.cookie.split("; ").find(e=>e.startsWith("auth"));return t&&(e.headers.Authorization="JWT ".concat(t.split("=")[1])),e}),t.Z=s},16349:function(e,t,n){n.d(t,{cn:function(){return s}});var r=n(44839),o=n(96164);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.m6)((0,r.W)(t))}},31863:function(e,t,n){n.d(t,{i:function(){return r}});let r=e=>{switch(e){case"zh-TW":default:return"zh_TW";case"en":return"en_US"}}}}]);