(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3143],{48447:function(e,t,n){Promise.resolve().then(n.bind(n,34327)),Promise.resolve().then(n.bind(n,40011)),Promise.resolve().then(n.bind(n,80310)),Promise.resolve().then(n.bind(n,50078)),Promise.resolve().then(n.bind(n,25891)),Promise.resolve().then(n.bind(n,95249)),Promise.resolve().then(n.bind(n,94023))},80310:function(e,t,n){"use strict";n.d(t,{default:function(){return d}});var r=n(57437),l=n(2265),s=n(18087),a=n(55950),i=n(96273),o=n(99687),c=n(16349),u=n(50078);function d(e){let{enrollMethod:t}=e,n=(0,s.useTranslations)("search.filter.enroll-methods"),[d,h]=(0,l.useState)(!1);return t?(0,r.jsx)(u.default,{label:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:n("method",{method:t})}),(0,r.jsx)("p",{className:(0,c.cn)("mt-0.5 hidden text-xs text-black/60 break-anywhere",d&&"block"),children:n("description-".concat(t))})]}),prefixIcon:(0,r.jsx)(i.Z,{size:18}),onClick:function(){h(e=>!e)},actions:(0,r.jsx)(u.BasicItemAction,{children:(0,r.jsx)(o.Z,{size:18})})}):(0,r.jsx)(u.default,{label:(0,r.jsx)("p",{className:"text-black/30",children:n("no-enroll")}),prefixIcon:(0,r.jsx)(a.Z,{size:18})})}},50078:function(e,t,n){"use strict";n.r(t),n.d(t,{BasicCopyItem:function(){return x},BasicExpandItem:function(){return f},BasicItemAction:function(){return p},default:function(){return m}});var r=n(57437),l=n(2265),s=n(22468),a=n(6884),i=n(42421),o=n(19216),c=n(28001),u=n(62626),d=n(16349);let h=e=>e?u.rU:"div";function m(e){var t;let n=h(e.href),l=!!(e.href||e.onClick||e.children);return e.label?(0,r.jsxs)("li",{className:(0,d.cn)("flex flex-col border-b last:border-0 md:border-0",!e.prefixIcon&&"border-0"),children:[(0,r.jsxs)(n,{href:e.href,target:(null===(t=e.href)||void 0===t?void 0:t.startsWith("http"))?"_blank":void 0,className:(0,d.cn)("group relative flex min-h-[52px] cursor-pointer items-center gap-4 px-4 py-2 break-anywhere hover:bg-black/[3%] focus-visible:bg-black/5 focus-visible:outline-none md:min-h-[42px] md:py-1.5 [&>svg]:shrink-0",!e.prefixIcon&&"min-h-0 pl-[50px] md:min-h-0",e.href&&"text-primary-main hover:bg-primary-main/5",e.className),tabIndex:l?0:void 0,onClick:function(t){e.onClick&&(t.stopPropagation(),e.onClick())},onContextMenu:function(){let t="undefined"!=typeof navigator&&navigator.maxTouchPoints>0;e.onContextMenu&&t&&("vibrate"in window.navigator&&window.navigator.vibrate(25),e.onContextMenu())},children:[e.prefixIcon,e.label,(0,r.jsx)("div",{className:"-my-3 -mr-2 ml-auto flex items-center md:-mr-3",children:e.actions})]}),e.children]}):null}function p(e){var t;let n=e.href?u.rU:"div";return(0,r.jsx)(n,{href:e.href,target:(null===(t=e.href)||void 0===t?void 0:t.startsWith("http"))?"_blank":void 0,className:(0,d.cn)("relative -ml-2 hidden select-none rounded-full bg-black/0 p-3 text-gray-800 hover:!bg-black/10 group-hover:flex group-hover:bg-black/5 not-touch:active:!bg-black/20 touch:-m-2 touch:-ml-3 touch:flex touch:bg-black/0 touch:p-5",e.href&&"touch:text-primary-main",e.className),onClick:function(t){(e.href||e.onClick)&&t.stopPropagation(),e.onClick&&(t.preventDefault(),e.onClick())},onTouchStart:function(t){(e.onClick||e.href)&&t.stopPropagation()},children:e.children})}function x(e){let{text:t,actions:n,notCopyHref:l,...i}=e,{isCopied:o,copy:u}=(0,c.F)(),h=i.children?f:m;function x(){t&&u({text:t,href:i.href,notCopyHref:l})}return(0,r.jsx)(h,{...i,actions:(0,r.jsxs)(r.Fragment,{children:[t?(0,r.jsx)(p,{onClick:()=>x(),className:(0,d.cn)("touch:hidden",o&&"!flex"),children:o?(0,r.jsx)(s.Z,{size:18}):(0,r.jsx)(a.Z,{size:18})}):null,n]}),onClick:function(){i.onClick||i.href||i.children||!t||x()},onContextMenu:t?()=>x():void 0})}function f(e){var t,n;let[s,a]=(0,l.useState)(null!==(t=e.defaultOpen)&&void 0!==t&&t),{actions:c,children:u,onClick:h,...x}=e;return(0,r.jsx)(m,{...x,label:s&&null!==(n=e.openLabel)&&void 0!==n?n:e.label,onClick:function(){a(e=>!e),null==h||h()},actions:(0,r.jsxs)(r.Fragment,{children:[c,(0,r.jsx)(p,{className:(0,d.cn)("flex transition-transform",s&&e.defaultOpen&&"scale-0",s&&"rotate-180",e.chevronClassName),children:(0,r.jsx)(i.Z,{size:18})})]}),children:(0,r.jsx)(o.Z,{in:s,children:u})})}},25891:function(e,t,n){"use strict";n.d(t,{default:function(){return x}});var r=n(57437),l=n(2265),s=n(18087),a=n(53225),i=n(30690),o=n(84167),c=n(16349),u=n(50078);function d(e){var t;let n=null!==(t=e.isEmpty)&&void 0!==t?t:!e.content&&!e.htmlContent;return e.hideIfEmpty&&n?null:(0,r.jsx)(u.BasicExpandItem,{label:e.label,prefixIcon:e.prefixIcon,actions:e.actions,defaultOpen:!n,chevronClassName:"!hidden",className:(0,c.cn)("sticky top-14 z-10 bg-[#f3f3f3] px-4 py-2.5 shadow hover:bg-[#e7e7e7] md:top-16",n&&"cursor-auto select-none !bg-neutral-200 opacity-30 shadow-none",e.className),children:!n&&(e.htmlContent?(0,r.jsx)("div",{className:"prose max-w-none whitespace-pre-wrap px-4 py-2.5 break-anywhere",dangerouslySetInnerHTML:{__html:e.htmlContent}}):(0,r.jsx)("div",{className:"prose max-w-none whitespace-pre-wrap px-4 py-2.5 break-anywhere",children:e.content}))})}var h=n(47232),m=n(76191);function p(e){var t,n;let{course:l}=e,a=(0,s.useTranslations)("course-detail.enroll-status"),{data:i}=(0,m.S)(),{data:o,isLoading:u,isError:d}=(0,h.K)(l,!0),p=!(null==i?void 0:i.semester)||i.semester===l.semester,x=(null==i?void 0:null===(t=i.progress)||void 0===t?void 0:t.phase)==="PreReg1"||(null==i?void 0:null===(n=i.progress)||void 0===n?void 0:n.phase)==="PreReg2";return(0,r.jsx)("div",{className:"flex flex-col justify-stretch gap-2 rounded-md py-1.5 md:w-fit",children:p?u?(0,r.jsx)("div",{className:"text-gray-500/70",children:a("loading")}):d?(0,r.jsx)("div",{className:"text-gray-500/70",children:a("error")}):(0,r.jsx)("div",{className:"flex w-full justify-between gap-6 text-right",children:Object.entries({enrolled:{label:a("enrolled"),count:o.enrolled,total:l.studentQuota.total-l.studentQuota.nonNtu},otherDept:{label:a("other-dept"),count:o.enrolledOtherDept,total:l.studentQuota.otherDepts},remaining:{label:a("remaining"),count:o.remaining,total:null},registered:{label:a("registered"),count:o.registered,total:null}}).map(e=>{let[t,n]=e;return"otherDept"!==t||x?(0,r.jsxs)("div",{className:"flex w-fit flex-col gap-1",children:[(0,r.jsx)("span",{className:"whitespace-pre text-sm text-gray-500",children:n.label}),(0,r.jsxs)("div",{className:"flex items-baseline justify-end gap-0.5",children:[(0,r.jsx)("span",{className:(0,c.cn)("text-2xl font-bold","remaining"===t&&n.count<=0&&"text-red-600"),children:n.count}),null!==n.total&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-sm",children:"/"}),(0,r.jsx)("span",{className:"text-sm",children:n.total})]})]})]},t):null})}):(0,r.jsx)("div",{className:"text-gray-500/70",children:a("not-current-semester")})})}function x(e){let{course:t}=e,n=(0,s.useTranslations)("course-detail"),[h,m]=(0,l.useState)(!1);return(0,r.jsx)(d,{label:(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:n("enroll-status.name")}),t.status===o.D4.Canceled&&(0,r.jsx)("span",{className:"pl-2.5 font-normal leading-4 text-error-main",children:n("status.cancel")}),(0,r.jsx)("span",{className:(0,c.cn)("mt-0.5 hidden text-xs text-black/60 break-anywhere",h&&"block font-normal"),children:n("enroll-status.description")})]}),prefixIcon:(0,r.jsx)(a.Z,{size:18}),content:(0,r.jsx)(p,{course:t}),isEmpty:t.status===o.D4.Canceled,actions:(0,r.jsx)(u.BasicItemAction,{onClick:function(){m(e=>!e)},children:(0,r.jsx)(i.Z,{size:18})})})}},28001:function(e,t,n){"use strict";n.d(t,{F:function(){return i}});var r=n(2265),l=n(18087),s=n(27776),a=n(62626);function i(){let[e,t]=(0,r.useState)(!1),n=(0,r.useRef)(null),i=(0,a.jD)(),o=(0,l.useTranslations)("hooks");return{isCopied:e,copy:async function(e){var r;let{text:l,href:a,notCopyHref:c}=e,u=c?l:(r=a||"https://course.ntu.edu.tw"+i,'<a href="'.concat(r,'" target="_blank">').concat(l,"</a>"));try{if(navigator.clipboard&&navigator.clipboard.write){let e=new ClipboardItem({"text/plain":new Blob([l],{type:"text/plain"}),"text/html":new Blob([u],{type:"text/html"})});await navigator.clipboard.write([e]),t(!0)}else await navigator.clipboard.writeText(l),t(!0);s.A.success(o("copy-success",{value:l}))}catch(e){s.A.error(o("copy-fail",{value:l}))}n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{t(!1)},1500)}}}},47232:function(e,t,n){"use strict";n.d(t,{K:function(){return c}});var r=n(51864),l=n(76191),s=n(57890),a=n(84167),i=n(41017),o=n(50591);let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{data:n}=(0,l.S)(),c=e.status===a.D4.Canceled||!(null==n?void 0:n.progress)||"PreReg1"===n.progress.phase&&n.progress.status===i.qb.Preselecting,u=(null==n?void 0:n.semester)===e.semester;return(0,r.a)({queryKey:s.a.enrollStatus(e.id),queryFn:async()=>c?{enrolled:0,enrolledOtherDept:0,registered:0,remaining:e.studentQuota.total-e.studentQuota.nonNtu}:(await o.Z.get("/v1/courses/enroll-status/".concat(e.id))).data,retry:!1,enabled:t&&u,staleTime:3e5})}}},function(e){e.O(0,[954,4771,6164,3273,4234,3732,9772,7438,205,9110,680,5673,7316,6833,5059,2453,991,5519,2971,7023,1744],function(){return e(e.s=48447)}),_N_E=e.O()}]);